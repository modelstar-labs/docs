"use strict";(self.webpackChunkmodelstar_docs=self.webpackChunkmodelstar_docs||[]).push([[765],{3905:(e,t,a)=>{a.d(t,{Zo:()=>u,kt:()=>m});var n=a(7294);function o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function r(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function s(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?r(Object(a),!0).forEach((function(t){o(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function i(e,t){if(null==e)return{};var a,n,o=function(e,t){if(null==e)return{};var a,n,o={},r=Object.keys(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||(o[a]=e[a]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(o[a]=e[a])}return o}var l=n.createContext({}),d=function(e){var t=n.useContext(l),a=t;return e&&(a="function"==typeof e?e(t):s(s({},t),e)),a},u=function(e){var t=d(e.components);return n.createElement(l.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},c=n.forwardRef((function(e,t){var a=e.components,o=e.mdxType,r=e.originalType,l=e.parentName,u=i(e,["components","mdxType","originalType","parentName"]),c=d(a),m=o,h=c["".concat(l,".").concat(m)]||c[m]||p[m]||r;return a?n.createElement(h,s(s({ref:t},u),{},{components:a})):n.createElement(h,s({ref:t},u))}));function m(e,t){var a=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var r=a.length,s=new Array(r);s[0]=c;var i={};for(var l in t)hasOwnProperty.call(t,l)&&(i[l]=t[l]);i.originalType=e,i.mdxType="string"==typeof e?e:o,s[1]=i;for(var d=2;d<r;d++)s[d]=a[d];return n.createElement.apply(null,s)}return n.createElement.apply(null,a)}c.displayName="MDXCreateElement"},3185:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>l,contentTitle:()=>s,default:()=>p,frontMatter:()=>r,metadata:()=>i,toc:()=>d});var n=a(7462),o=(a(7294),a(3905));const r={},s="What are Python UDFs and Stored Procedures",i={unversionedId:"bilingualism/index",id:"bilingualism/index",title:"What are Python UDFs and Stored Procedures",description:"UDFs and Stored Procedures are used to modularize SQL statement.",source:"@site/docs/bilingualism/index.md",sourceDirName:"bilingualism",slug:"/bilingualism/",permalink:"/docs/bilingualism/",draft:!1,editUrl:"https://github.com/modelstar-labs/docs/docs/bilingualism/index.md",tags:[],version:"current",lastUpdatedAt:1665072202,formattedLastUpdatedAt:"Oct 6, 2022",frontMatter:{},sidebar:"docs",previous:{title:"Introduction",permalink:"/docs/introduction/"},next:{title:"Quickstart",permalink:"/docs/quickstart/"}},l={},d=[{value:"What are UDFs?",id:"what-are-udfs",level:2},{value:"What are Stored Procedures?",id:"what-are-stored-procedures",level:2},{value:"UDFs and SProcs bring Python&#39;s superpower to SQL",id:"udfs-and-sprocs-bring-pythons-superpower-to-sql",level:2},{value:"What problems Python UDFs and SProc solve:",id:"what-problems-python-udfs-and-sproc-solve",level:3},{value:"Python&#39;s strong ecosystem",id:"pythons-strong-ecosystem",level:3},{value:"Some issues that could happen during Python UDF deployment",id:"some-issues-that-could-happen-during-python-udf-deployment",level:2},{value:"Test coverage issue",id:"test-coverage-issue",level:4},{value:"Deployment issue",id:"deployment-issue",level:4},{value:"Observability issue",id:"observability-issue",level:4}],u={toc:d};function p(e){let{components:t,...r}=e;return(0,o.kt)("wrapper",(0,n.Z)({},u,r,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"what-are-python-udfs-and-stored-procedures"},"What are Python UDFs and Stored Procedures"),(0,o.kt)("p",null,"UDFs and Stored Procedures are used to modularize SQL statement."),(0,o.kt)("h2",{id:"what-are-udfs"},"What are UDFs?"),(0,o.kt)("p",null,"In data platforms (warehouse, lakehouse), a UDF (user-defined function) lets you extend the data transformations/operations that are not available through built-in system-deifned functions. These are stored as database objects that can be evaluated in standard query language (usually SQL) statements."),(0,o.kt)("p",null,"UDFs are typically evaluated row wise, but they can also be extended to evaluate on a table through vectorization of the function or as ",(0,o.kt)("a",{parentName:"p",href:"#what-are-stored-procedures"},"Store Procedures"),"."),(0,o.kt)("admonition",{type:"tip"},(0,o.kt)("p",{parentName:"admonition"},"Modelstar let's you define and run Python based UDFs, thereby extending SQL to the ",(0,o.kt)("a",{parentName:"p",href:"#pythons-super-powers"},"powers of Python"),".")),(0,o.kt)("h2",{id:"what-are-stored-procedures"},"What are Stored Procedures?"),(0,o.kt)("p",null,"A SProc (stored procedure) is a prepared SQL code that you can save, and reuse it. In general it consists of a bunch of SQL statements, that can include transformations and creation/deletion of tables. To execute a stored procedure you ",(0,o.kt)("inlineCode",{parentName:"p"},"CALL")," it."),(0,o.kt)("p",null,"Parameters can also be passed to a SProc, so that the SProc can act based on the parameter value(s) passed."),(0,o.kt)("admonition",{type:"tip"},(0,o.kt)("p",{parentName:"admonition"},"Modelstar lets you define SProc as a Python function. This function can take in parameters, which also include table names that are made available inside your function as a dataframe.")),(0,o.kt)("h2",{id:"udfs-and-sprocs-bring-pythons-superpower-to-sql"},"UDFs and SProcs bring Python's superpower to SQL"),(0,o.kt)("h3",{id:"what-problems-python-udfs-and-sproc-solve"},"What problems Python UDFs and SProc solve:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"Hard-to-read SQL statements"),"\nNo one likes lengthy SQL statements. It\u2019s hard to read, modify and reuse, causing technical debts."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"Limited SQL capability"),"\nSQL is good at aggregation and filter based data manipulation, but has limited usages in something a bit more complex, such as predictive analytics, machine learning, etc..")),(0,o.kt)("h3",{id:"pythons-strong-ecosystem"},"Python's strong ecosystem"),(0,o.kt)("p",null,"Python's ecosystem can complement SQL in the following ways:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"Matured development tool chains")," Python is used for both scripting and serious software projects. Its tool chains (development, testing, logging, CI/CD, etc.) have evolved to support web-scale applications, so teams can collaborate well to build complex systems."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"Data related packages")," SQL and Python are the top 2 languages used for data transformation. Data practitioners who leverage both languages can easily build elegant solutions.")),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Python vs SQL",src:a(2895).Z,width:"1458",height:"790"})),(0,o.kt)("h2",{id:"some-issues-that-could-happen-during-python-udf-deployment"},"Some issues that could happen during Python UDF deployment"),(0,o.kt)("h4",{id:"test-coverage-issue"},"Test coverage issue"),(0,o.kt)("p",null,"Sometimes a function works perfectly in local dev environment, but breaks in warehouses."),(0,o.kt)("h4",{id:"deployment-issue"},"Deployment issue"),(0,o.kt)("p",null,"Snowpark's ",(0,o.kt)("inlineCode",{parentName:"p"},"Session.udf.register()")," relies on manual efforts to map out dependencies and handle files. Once projects become complicated, such manual efforts should be replaced by modern CI/CD pipelines."),(0,o.kt)("h4",{id:"observability-issue"},"Observability issue"),(0,o.kt)("p",null,"There're no observability on how well our UDFs run in a warehouse. In production, developers want to know telemetry, availability, logs, errors, status, and usage."),(0,o.kt)("admonition",{type:"tip"},(0,o.kt)("p",{parentName:"admonition"},"Modelstar is developed to solve the above issues.")))}p.isMDXComponent=!0},2895:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/python-vs-sql-b6760328319988a413bc290db553bab0.png"}}]);