"use strict";(self.webpackChunkmodelstar_docs=self.webpackChunkmodelstar_docs||[]).push([[894],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>m});var a=n(7294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,o=function(e,t){if(null==e)return{};var n,a,o={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var s=a.createContext({}),p=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},c=function(e){var t=p(e.components);return a.createElement(s.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},u=a.forwardRef((function(e,t){var n=e.components,o=e.mdxType,r=e.originalType,s=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),u=p(n),m=o,h=u["".concat(s,".").concat(m)]||u[m]||d[m]||r;return n?a.createElement(h,i(i({ref:t},c),{},{components:n})):a.createElement(h,i({ref:t},c))}));function m(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var r=n.length,i=new Array(r);i[0]=u;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:o,i[1]=l;for(var p=2;p<r;p++)i[p]=n[p];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}u.displayName="MDXCreateElement"},42:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>i,default:()=>d,frontMatter:()=>r,metadata:()=>l,toc:()=>p});var a=n(7462),o=(n(7294),n(3905));const r={},i="Quickstart",l={unversionedId:"quickstart/index",id:"quickstart/index",title:"Quickstart",description:"In just a few minutes you can deploy a Python function to your Data Warehouses/Lakehouses and run them as SQL functions.",source:"@site/docs/quickstart/index.md",sourceDirName:"quickstart",slug:"/quickstart/",permalink:"/docs/quickstart/",draft:!1,editUrl:"https://github.com/modelstar-labs/docs/docs/quickstart/index.md",tags:[],version:"current",lastUpdatedAt:1665164229,formattedLastUpdatedAt:"Oct 7, 2022",frontMatter:{},sidebar:"docs",previous:{title:"Introduction",permalink:"/docs/introduction/"}},s={},p=[{value:"Installation",id:"installation",level:2},{value:"Create a project",id:"create-a-project",level:2},{value:"Connect to your data-platform",id:"connect-to-your-data-platform",level:2},{value:"Start your Modelstar session",id:"start-your-modelstar-session",level:2},{value:"Register a Python UDF",id:"register-a-python-udf",level:2}],c={toc:p};function d(e){let{components:t,...n}=e;return(0,o.kt)("wrapper",(0,a.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"quickstart"},"Quickstart"),(0,o.kt)("p",null,"In just a few minutes you can deploy a Python function to your Data Warehouses/Lakehouses and run them as SQL functions."),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"You don't have to write any special syntax specific to your data platform."),(0,o.kt)("li",{parentName:"ul"},"You don't have to setup any environment or compute server instance. All the compute and Python execution is done within the data platform."),(0,o.kt)("li",{parentName:"ul"},"You don't have to move data away from your data platform.")),(0,o.kt)("h2",{id:"installation"},"Installation"),(0,o.kt)("p",null,"To get started with Moelstar, install the Modelstar Python package into your local Python environment."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"$ pip install modelstar\n")),(0,o.kt)("admonition",{type:"tip"},(0,o.kt)("p",{parentName:"admonition"},"Install ",(0,o.kt)("inlineCode",{parentName:"p"},"modelstar")," within a Python virtual environment."),(0,o.kt)("p",{parentName:"admonition"},"Hint: ",(0,o.kt)("inlineCode",{parentName:"p"},"pyenv"),", ",(0,o.kt)("inlineCode",{parentName:"p"},"virtualenv"),", ",(0,o.kt)("inlineCode",{parentName:"p"},"poetry"))),(0,o.kt)("admonition",{type:"caution"},(0,o.kt)("p",{parentName:"admonition"},"Modelstar currently supports only Python 3.8.")),(0,o.kt)("h2",{id:"create-a-project"},"Create a project"),(0,o.kt)("p",null,"Modelstar provides a project template out-of-the-box with sample UDFs that you can deploy to your data platform."),(0,o.kt)("p",null,"Initialize a project from template using:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"$ modelstar init my_project\n")),(0,o.kt)("p",null,"This will create a project folder named ",(0,o.kt)("strong",{parentName:"p"},(0,o.kt)("em",{parentName:"strong"},"my_project"))," at the location you are running this command."),(0,o.kt)("admonition",{type:"tip"},(0,o.kt)("p",{parentName:"admonition"},(0,o.kt)("inlineCode",{parentName:"p"},"modelstar init <project_name>")," is the base command, where <project_name> can be replaced with the name of your choice."),(0,o.kt)("p",{parentName:"admonition"},(0,o.kt)("inlineCode",{parentName:"p"},"modelstar init .")," can be used to initialize the project inside the current folder location. Running this command will create all the necessary files within the current folder location and name the project using the folder's name.")),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},(0,o.kt)("em",{parentName:"strong"},"my_project"))," is created using a Modelstar project template, which provides you with a few sample Python UDFs and Stored Procedures to push to your data platform. This helps you get started with modelstar quickly. Your project folder should look like this. Check out the Readme.md file for quick to access commands on subsequent project creation and execution."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},".\n\u2514\u2500\u2500 my_project\n    \u251c\u2500\u2500 README.md\n    \u251c\u2500\u2500 modelstar.toml\n    \u2514\u2500\u2500 samples\n        \u251c\u2500\u2500 data_functions\n        \u2502\xa0\xa0 \u251c\u2500\u2500 country-capitals.csv\n        \u2502\xa0\xa0 \u2514\u2500\u2500 find_capital.py\n        \u2514\u2500\u2500 machine_learning\n            \u251c\u2500\u2500 ad_sales.csv\n            \u251c\u2500\u2500 inference.py\n            \u2514\u2500\u2500 training.py\n")),(0,o.kt)("h2",{id:"connect-to-your-data-platform"},"Connect to your data-platform"),(0,o.kt)("admonition",{type:"note"},(0,o.kt)("p",{parentName:"admonition"},"Modelstar currently supports only Snowflake. Support for other data-platforms are on the roadmap.")),(0,o.kt)("p",null,"The ",(0,o.kt)("inlineCode",{parentName:"p"},"modelstar.toml")," file is used to set and configure the parameter of modelstar. This file will also be used to enter your credentials to communication with your data platform."),(0,o.kt)("p",null,"The following is an example to use a Snowflake account:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-toml",metastring:'title="./modelstar.toml"',title:'"./modelstar.toml"'},'\n[snowflake-test]\n\nusername = "<username>"\npassword = "<password>"\naccount = "<account>"\nwarehouse = "<warehouse_name>"\nrole = "<role_name>"\ndatabase = "<database>"\nschema = "<schema>"\nstage = "<stage>"\n\n')),(0,o.kt)("admonition",{type:"info"},(0,o.kt)("p",{parentName:"admonition"},"These credentials are never shared with Modelstar and only live on your local machine.")),(0,o.kt)("admonition",{type:"danger"},(0,o.kt)("p",{parentName:"admonition"},"Don't forget to remove this file from your version control, since it ocntains sensitive information.")),(0,o.kt)("p",null,"First, you configure a named session, which will contain the details of your account you will be working with. As an example, here we are using a Snowflake account, and naming the session as ",(0,o.kt)("inlineCode",{parentName:"p"},"snowflake-test"),", which contains the account details. You will later use this session name when starting a modelstar session."),(0,o.kt)("h2",{id:"start-your-modelstar-session"},"Start your Modelstar session"),(0,o.kt)("p",null,"The ",(0,o.kt)("inlineCode",{parentName:"p"},"modelstar")," command line interface is available when you installed Modelstar in the first step. We can now start a Modelstar session from your terminal. Run the following:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"$ modelstar use snowflake-test\n")),(0,o.kt)("admonition",{type:"note"},(0,o.kt)("p",{parentName:"admonition"},"Make sure you are running all the ",(0,o.kt)("inlineCode",{parentName:"p"},"modelstar")," commands from the root of your project folder and have also activate the Python virtual environment that contains the ",(0,o.kt)("inlineCode",{parentName:"p"},"modelstar")," package.")),(0,o.kt)("p",null,"This will give the following output, which shows you the available databases for your named-seesion, here it is ",(0,o.kt)("inlineCode",{parentName:"p"},"snowflake-test"),"."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"    Loading configuration: [snowflake-test]\n\n\n    Showing available databases for config: [snowflake-test]\n\n+----------------------+-----------------------+-------------------------------------------------------+--------------+\n|      created_on      |         name          |                        origin                         |    owner     |\n+----------------------+-----------------------+-------------------------------------------------------+--------------+\n| Sep 05, 2022 - 15:19 |    MODELSTAR_TEST     |                                                       | ACCOUNTADMIN |\n| Aug 16, 2022 - 00:43 |       SNOWFLAKE       |                SNOWFLAKE.ACCOUNT_USAGE                |              |\n| Aug 16, 2022 - 00:43 | SNOWFLAKE_SAMPLE_DATA | SFSALESSHARED.SFC_SAMPLES_AWS_US_WEST_2_2.SAMPLE_DATA | ACCOUNTADMIN |\n| Aug 19, 2022 - 18:05 |   SNOWPARK_EXAMPLE    |                                                       | ACCOUNTADMIN |\n+----------------------+-----------------------+-------------------------------------------------------+--------------+\n")),(0,o.kt)("admonition",{type:"tip"},(0,o.kt)("p",{parentName:"admonition"},"The ",(0,o.kt)("inlineCode",{parentName:"p"},"modelstar use <named-session>")," could also be used to debug your ",(0,o.kt)("inlineCode",{parentName:"p"},"modelstart.toml")," configuration.")),(0,o.kt)("h2",{id:"register-a-python-udf"},"Register a Python UDF"),(0,o.kt)("p",null,"Using the ",(0,o.kt)("inlineCode",{parentName:"p"},"modelstar")," cli you can register a function as a UDF using the command ",(0,o.kt)("inlineCode",{parentName:"p"},"modelstar register function <file_location>:<function_handler>")," along with the location of the function and the function handler. Let's use the sample function provided with the project template:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-py",metastring:'title="./samples/functions/find_capital.py"',title:'"./samples/functions/find_capital.py"'},"\nfrom modelstar import modelstar_read_path\nimport pandas as pd\n\nFILE_1 = modelstar_read_path(local_path='./samples/functions/country-capitals.csv')\n\n# highlight-start\ndef find_capital(country_name: str) -> str:\n\n    cinfo = pd.read_csv(FILE_1)\n\n    country_details = cinfo.loc[cinfo['CountryName'] == country_name]\n    capital_name = country_details.iloc[0]['CapitalName']\n\n    return capital_name\n# highlight-end\n")),(0,o.kt)("p",null,"The function ",(0,o.kt)("inlineCode",{parentName:"p"},"find_capital")," loads a file that contains a list of country names and its capital. It takes in the ",(0,o.kt)("inlineCode",{parentName:"p"},"country_name")," as an argument and returns it's ",(0,o.kt)("inlineCode",{parentName:"p"},"capital_name"),"."),(0,o.kt)("admonition",{type:"note"},(0,o.kt)("p",{parentName:"admonition"},"When you are defining a Python function that you want register as a UDF, you need to also define the parameter types and the return type. The types that are available to be used for a UDF are: ",(0,o.kt)("inlineCode",{parentName:"p"},"str"),", ",(0,o.kt)("inlineCode",{parentName:"p"},"int"),", ",(0,o.kt)("inlineCode",{parentName:"p"},"float"),", ",(0,o.kt)("inlineCode",{parentName:"p"},"bool"),", ",(0,o.kt)("inlineCode",{parentName:"p"},"dict"),", ",(0,o.kt)("inlineCode",{parentName:"p"},"list"),".")),(0,o.kt)("admonition",{type:"note"},(0,o.kt)("p",{parentName:"admonition"},(0,o.kt)("inlineCode",{parentName:"p"},"modelstar")," takes care of finding and packaging the dependencies that you have specified in your .py file. This also includes any file (such as a .csv, .txt, .pkl, .joblib) you are loading. To make local data files availalbe for your function execution, please use the ",(0,o.kt)("inlineCode",{parentName:"p"},"modelstar_read_path")," from the ",(0,o.kt)("inlineCode",{parentName:"p"},"modelstar")," package to load the file."),(0,o.kt)("p",{parentName:"admonition"},"Why do we do this?"),(0,o.kt)("p",{parentName:"admonition"},"Doing it this was way you can make sure your functions can be tested locally with its depenedencies (modules, libraries and local data files) without involving any specific code dependent of your data platform. Modelstar takes care of packaing and your functions as UDFs as it is required by the data platform.")),(0,o.kt)("p",null,"To register the UDF to your data-platform, you would have to run the following command:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"$ modelstar register function samples/data_functions/find_capital.py:find_capital\n")),(0,o.kt)("p",null,"The final argument of the command is the colon representation of the function handler along with the location of the file that contains it as: ",(0,o.kt)("inlineCode",{parentName:"p"},"<file_location>:<function_handler>"),"."),(0,o.kt)("p",null,"After the registration is complete, you get the output with information about the status and, about how to use your UDF and where it is located."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"\n    Registering function: `find_capital` from `find_capital.py`\n\n+---------------------------------------------+\n|                   status                    |\n+---------------------------------------------+\n| Function FIND_CAPITAL successfully created. |\n+---------------------------------------------+\n\n\n    Function available at: `MODELSTAR_TEST.PUBLIC`\n\n")))}d.isMDXComponent=!0}}]);